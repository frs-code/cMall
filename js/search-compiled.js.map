{"version":3,"sources":["search.js"],"names":[],"mappings":"AAAA;AACA,CAAE,CAAD,IAAK;AACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BE,QAAI,UAAU,EAAE,gBAAF,CAAd;AAAA,QACI,QAAQ,QAAQ,IAAR,CAAa,cAAb,CADZ;AAAA,QAEI,SAAS,QAAQ,IAAR,CAAa,eAAb,CAFb;AAAA,QAGI,OAAO,QAAQ,IAAR,CAAa,aAAb,CAHX;AAAA,QAII,WAAU,QAAQ,IAAR,CAAa,iBAAb,CAJd;AAKI;AACR;AACI,UAAM,EAAN,CAAS,QAAT,EAAkB,MAAI;AAClB,YAAG,OAAO,GAAP,GAAa,IAAb,OAAwB,EAA3B,EAA8B;AAC1B,mBAAO,KAAP;AACH;AACJ,KAJD;AAKJ;AACI,WAAO,EAAP,CAAU,OAAV,EAAkB,MAAI;AAClB,YAAI,MAAM,OAAO,GAAP,GAAa,IAAb,EAAV;AACA,YAAI,MAAM,iDAA+C,GAA/C,GAAmD,0BAAnD,GACN,6CADJ;AAED,UAAE,IAAF,CAAO;AACH,iBAAI,GADD;AAEH,sBAAS,OAFN;AAGH,qBAAS,IAAD,IAAQ;AACZ,oBAAI,MAAM,IAAV;AACA,oBAAI,MAAM,IAAI,QAAJ,EAAc,MAAxB;AACA,oBAAI,OAAO,EAAX;AACA,oBAAG,MAAM,CAAT,EAAW;AACP,6BAAS,IAAT,GAAgB,IAAhB,CAAqB,EAArB;AACA;AACH;AACD,qBAAI,IAAI,IAAE,CAAV,EAAa,IAAE,GAAf,EAAoB,GAApB,EAAwB;AACpB,wBAAG,IAAI,CAAP,EAAU;AACV,4BAAO,iDAAgD,IAAI,QAAJ,EAAc,CAAd,EAAiB,CAAjB,CAAoB,OAA3E;AACH;AACD,yBAAS,IAAT,CAAc,IAAd,EAAoB,IAApB;AACH,aAhBE;AAiBH,iBAAK,GAAD,IAAO;AACP,yBAAS,IAAT,GAAgB,IAAhB,CAAqB,EAArB;AACH;AAnBE,SAAP;AAqBP;AACQ,iBAAS,EAAT,CAAY,OAAZ,EAAqB,CAAD,IAAK;AACrB,mBAAO,GAAP,CAAW,EAAE,MAAF,CAAS,SAApB;AACA,kBAAM,MAAN;AACH,SAHD;AAIH,KA9BD;AA+BJ;AACI;;;;;;AAMJ;AACG;;;;;;;AAOC,WAAO,EAAP,CAAU,OAAV,EAAkB,MAAI;AAClB,iBAAS,IAAT;AACH,KAFD,EAEG,EAFH,CAEM,OAFN,EAEc,MAAI;AACd,eAAO,KAAP;AACH,KAJD;AAKA,MAAE,QAAF,EAAY,EAAZ,CAAe,OAAf,EAAuB,MAAI;AACvB,iBAAS,IAAT;AACH,KAFD;AAGH,CAjGD,EAiGG,MAjGH","file":"search-compiled.js","sourcesContent":["//搜索框\r\n(($)=>{\r\n    //数据缓存\r\n  /*  var cache = {\r\n        data:{},\r\n        count:0,\r\n        addData:function(key,data){\r\n            if(!this.data[key]){\r\n                this.data[key] = data;\r\n                this.count++;\r\n            }\r\n        },\r\n        readData:function(key){\r\n            return this.data[key];\r\n        },\r\n        removeDataByKey:function(key){\r\n            delete  this.data[key];\r\n            this.count--;\r\n        },\r\n        removeDataByOrder:function(num){\r\n            var count = 0;\r\n            for(var key in this.data){\r\n                if(count >= num){\r\n                    break;\r\n                }\r\n                count++;\r\n                this.removeDataByKey(key);\r\n            }\r\n        }\r\n    };*/\r\n\r\n    var $search = $('.header-search'),\r\n        $form = $search.find('.search-form'),\r\n        $input = $search.find('.search-input'),\r\n        $btn = $search.find(\".search-btn\"),\r\n        $content =$search.find('.search-content');\r\n        //var flag = true;\r\n//搜索框验证\r\n    $form.on('submit',()=>{\r\n        if($input.val().trim() === ''){\r\n            return false;\r\n        }\r\n    });\r\n//自动完成\r\n    $input.on('input',()=>{\r\n        var key = $input.val().trim();\r\n        var url = 'https://suggest.taobao.com/sug?code=utf-8&q='+key+'&_ksTS=1576734400260_663' +\r\n            '&callback=jsonp664&k=1&area=c2c&bucketid=11';\r\n       $.ajax({\r\n           url:url,\r\n           dataType:'jsonp',\r\n           success:(data)=>{\r\n               var Arr = data;\r\n               var len = Arr['result'].length;\r\n               var html = '';\r\n               if(len < 1){\r\n                   $content.hide().html('');\r\n                   return;\r\n               }\r\n               for(var i=0; i<len; i++){\r\n                   if(i > 6) break;\r\n                   html+=`<li class=\"search-content-item text-ellipsis\">${Arr['result'][i][0]}</li>`;\r\n               }\r\n               $content.html(html).show();\r\n           },\r\n           err:(err)=>{\r\n               $content.hide().html('');\r\n           }\r\n       });\r\n//点击下拉列表选项完成跳转,事件代理实现\r\n        $content.on('click',(e)=>{\r\n            $input.val(e.target.innerHTML);\r\n            $form.submit();\r\n        });\r\n    });\r\n//加锁策略解决blur先隐藏下拉菜单导致下拉菜单点击事件实训\r\n    /*$content.hover(()=>{\r\n        flag = false;\r\n        console.log(flag)\r\n    },()=>{\r\n        flag = true;\r\n    });*/\r\n//显示隐藏下拉菜单\r\n   /* $input.on('focus',()=>{\r\n        $content.show();\r\n    }).on('blur',()=>{\r\n        if(flag){\r\n            $content.hide();\r\n        }\r\n    })*/\r\n    $input.on('focus',()=>{\r\n        $content.show();\r\n    }).on('click',()=>{\r\n        return false;\r\n    });\r\n    $(document).on('click',()=>{\r\n        $content.hide();\r\n    });\r\n})(jQuery);"]}